<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>脱毛サロン無料カウンセリング予約</title>
  <style>
      body {
          font-family: Arial, sans-serif;
          background-color: #f0fff4;
          margin: 0;
          padding: 20px;
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
      }
      .container {
          background-color: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          max-width: 500px;
          width: 100%;
      }
      h1 {
          color: #15803d;
          text-align: center;
          margin-bottom: 20px;
      }
      .form-group {
          margin-bottom: 15px;
      }
      label {
          display: block;
          margin-bottom: 5px;
          color: #15803d;
      }
      input[type="text"],
      input[type="email"],
      input[type="tel"],
      input[type="date"],
      input[type="time"],
      textarea,
      select {
          width: 100%;
          padding: 8px;
          border: 1px solid #86efac;
          border-radius: 4px;
          box-sizing: border-box;
      }
      input[type="text"]:focus,
      input[type="email"]:focus,
      input[type="tel"]:focus,
      input[type="date"]:focus,
      input[type="time"]:focus,
      textarea:focus,
      select:focus {
          outline: none;
          border-color: #22c55e;
          box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
      }
      .accordion {
          margin-bottom: 15px;
      }
      .accordion-item {
          border: 1px solid #d1fae5;
          border-radius: 4px;
          margin-bottom: 10px;
      }
      .accordion-header {
          background-color: #ecfdf5;
          padding: 10px;
          cursor: pointer;
      }
      .accordion-content {
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.3s ease-out;
      }
      .accordion-trigger {
          display: none;
      }
      .accordion-trigger:checked + .accordion-item .accordion-content {
          max-height: 1000px;
      }
      .accordion-trigger:checked + .accordion-item .accordion-header::after {
          content: "▲";
      }
      .accordion-header::after {
          content: "▼";
          float: right;
      }
      .menu-item {
          padding: 10px;
          border-top: 1px solid #d1fae5;
      }
      .menu-item label {
          display: flex;
          align-items: center;
      }
      .menu-item input[type="checkbox"] {
          margin-right: 10px;
      }
      .menu-item-description {
          font-size: 0.9em;
          color: #4b5563;
          margin-left: 25px;
      }
      button {
          background-color: #22c55e;
          color: white;
          border: none;
          padding: 10px 15px;
          border-radius: 4px;
          cursor: pointer;
          width: 100%;
          font-size: 16px;
      }
      button:hover {
          background-color: #16a34a;
      }
      .date-time-group {
          margin-top: 10px;
      }
      .preference {
          margin-bottom: 20px;
          padding: 15px;
          border: 1px solid #d1fae5;
          border-radius: 4px;
          background-color: #f8fafc;
      }
      .preference label {
          margin-top: 10px;
      }
      .preference select {
          margin-top: 5px;
      }
      @media (max-width: 600px) {
          .container {
              padding: 15px;
          }
      }
  </style>
</head>
<body>
  <div class="container">
    <h1>無料カウンセリング予約</h1>

    <!-- ↓ ここを自分のGASウェブアプリURLに変える -->
    <form action="https://script.google.com/macros/s/AKfycbwNqbgTIvY4VxOzKRxD8KS0OzmceOXTnrnkZF3Y4qWzAmUef8nFnsB1K7hnbo2OhYcjyA/exec" 
          method="POST" 
          id="reservationForm">
      
      <!-- お名前 -->
      <div class="form-group">
        <label for="name">お名前</label>
        <input type="text" id="name" name="name" required>
      </div>
      
      <!-- メールアドレス -->
      <div class="form-group">
        <label for="email">メールアドレス</label>
        <input type="email" id="email" name="email" required>
      </div>
      
      <!-- 電話番号 -->
      <div class="form-group">
        <label for="phone">電話番号</label>
        <input type="tel" id="phone" name="phone" required>
      </div>
      
      <!-- ご希望のメニュー（複数選択可） -->
      <div class="form-group">
        <label>ご希望のメニュー（複数選択可）</label>
        <div class="accordion">
          <input type="checkbox" id="accordion-ladies" class="accordion-trigger" aria-hidden="true">
          <div class="accordion-item">
            <label for="accordion-ladies" class="accordion-header" aria-controls="accordion-ladies-content" aria-expanded="false">
              レディース
            </label>
            <div class="accordion-content" id="accordion-ladies-content">
              <div class="menu-item">
                <label>
                  <!-- ここを selectedMenus ではなく "selectedMenus[]" にする -->
                  <input type="checkbox" name="selectedMenus[]" value="fullBodyWithFaceVIO">
                  全身脱毛（顔・VIO込）
                </label>
                <p class="menu-item-description">顔とVIOを含む全身の脱毛を行います。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="fullBodyWithoutFaceVIO">
                  全身脱毛（顔・VIO無）
                </label>
                <p class="menu-item-description">顔とVIOを除く全身の脱毛を行います。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="fullBodyWithoutFaceOrVIO">
                  全身脱毛（顔orVIO無）
                </label>
                <p class="menu-item-description">顔またはVIOのどちらかを除く全身の脱毛を行います。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="vio">
                  VIO脱毛
                </label>
                <p class="menu-item-description">蒸れるこれからの季節に最適なVIO脱毛です。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="back">
                  背中脱毛
                </label>
                <p class="menu-item-description">嬉しいシェービング付きの背中脱毛です。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="napeAndBack">
                  うなじ＋背中脱毛
                </label>
                <p class="menu-item-description">夏に向けてうなじと背中の脱毛を行います。</p>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion">
          <input type="checkbox" id="accordion-mens" class="accordion-trigger" aria-hidden="true">
          <div class="accordion-item">
            <label for="accordion-mens" class="accordion-header" aria-controls="accordion-mens-content" aria-expanded="false">
              メンズ
            </label>
            <div class="accordion-content" id="accordion-mens-content">
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="mensBeard">
                  メンズ髭脱毛
                </label>
                <p class="menu-item-description">毎日のストレスをゼロにする髭脱毛です。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="mensFullBodyWithBeardVO">
                  メンズ全身脱毛（髭・VO込）
                </label>
                <p class="menu-item-description">髭とVOを含むメンズ全身脱毛です。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="mensFullBodyWithBeardOrVIO">
                  メンズ全身脱毛（髭またはVIO）
                </label>
                <p class="menu-item-description">髭またはVIOを含むメンズ全身脱毛です。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="mensFullBodyWithoutBeardVIO">
                  メンズ全身脱毛（髭・VIO無）
                </label>
                <p class="menu-item-description">髭とVIOを除くメンズ全身脱毛です。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="junior">
                  ジュニア脱毛
                </label>
                <p class="menu-item-description">お子様向けの脱毛メニューです。</p>
              </div>
              <div class="menu-item">
                <label>
                  <input type="checkbox" name="selectedMenus[]" value="mugwort">
                  よもぎ蒸し
                </label>
                <p class="menu-item-description">基礎体温を上げて免疫アップを目指すよもぎ蒸しです。</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 希望日時 -->
      <div class="form-group">
        <label>希望日時</label>
        <div class="date-time-group">
          <div class="preference">
            <label for="preferredDate1">第1希望日</label>
            <!-- nameを "preferences[0][date]" ではなく "preferredDate1" に変更 -->
            <input type="date" id="preferredDate1" name="preferredDate1" required>
            <label for="preferredTime1">第1希望時間</label>
            <!-- nameを "preferences[0][time]" ではなく "preferredTime1" に変更 -->
            <select id="preferredTime1" name="preferredTime1" required>
              <option value="">選択してください</option>
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
              <option value="13:00">13:00</option>
              <option value="14:00">14:00</option>
              <option value="15:00">15:00</option>
              <option value="16:00">16:00</option>
              <option value="17:00">17:00</option>
              <option value="18:00">18:00</option>
            </select>
          </div>
          <div class="preference">
            <label for="preferredDate2">第2希望日</label>
            <input type="date" id="preferredDate2" name="preferredDate2">
            <label for="preferredTime2">第2希望時間</label>
            <select id="preferredTime2" name="preferredTime2">
              <option value="">選択してください</option>
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
              <option value="13:00">13:00</option>
              <option value="14:00">14:00</option>
              <option value="15:00">15:00</option>
              <option value="16:00">16:00</option>
              <option value="17:00">17:00</option>
              <option value="18:00">18:00</option>
            </select>
          </div>
          <div class="preference">
            <label for="preferredDate3">第3希望日</label>
            <input type="date" id="preferredDate3" name="preferredDate3">
            <label for="preferredTime3">第3希望時間</label>
            <select id="preferredTime3" name="preferredTime3">
              <option value="">選択してください</option>
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
              <option value="13:00">13:00</option>
              <option value="14:00">14:00</option>
              <option value="15:00">15:00</option>
              <option value="16:00">16:00</option>
              <option value="17:00">17:00</option>
              <option value="18:00">18:00</option>
            </select>
          </div>
        </div>
      </div>
      
      <!-- ご質問・ご要望 -->
      <div class="form-group">
        <label for="message">ご質問・ご要望（任意）</label>
        <textarea id="message" name="message" rows="4"></textarea>
      </div>
      
      <!-- 送信ボタン -->
      <button type="submit">カウンセリングを予約する</button>
    </form>

    <!-- アクセス情報 -->
    <div class="access-info" style="margin-top: 40px; padding: 20px; background-color: #f8fafc; border-radius: 8px; border: 1px solid #d1fae5;">
      <h2 style="color: #15803d; margin-top: 0; margin-bottom: 15px; font-size: 1.5em;">アクセス情報</h2>
      <div style="margin-bottom: 15px;">
        <h3 style="color: #15803d; margin-bottom: 8px; font-size: 1.2em;">住所</h3>
        <p style="margin: 0; color: #4b5563;">
          〒664-0895<br>
          兵庫県伊丹市宮ノ前３丁目２−１３−７０１
        </p>
      </div>
      <!-- マップ表示ボタン -->
      <button type="button" 
              id="toggleMap" 
              style="background-color: #f8fafc; color: #15803d; border: 1px solid #15803d; margin: 10px 0; width: auto; padding: 8px 16px;">
        地図を表示
      </button>
      <!-- マップコンテナ -->
      <div id="mapContainer" style="display: none; margin-bottom: 15px;">
        <iframe 
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d289.63962234437383!2d135.41429692051358!3d34.783336551588036!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6000f054f6480a6f%3A0x87bc30058798e314!2z44CSNjY0LTA4OTUg5YW15bqr55yM5LyK5Li55biC5a6u44OO5YmN77yT5LiB55uu77yS4oiS77yR77yT4oiS77yX77yQ77yR!5e0!3m2!1sja!2sjp!4v1739236368841!5m2!1sja!2sjp"
          width="100%"
          height="300"
          style="border: 0; border-radius: 4px;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 現在の日付を取得
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const dd = String(today.getDate()).padStart(2, '0');
      const minDate = `${yyyy}-${mm}-${dd}`;

      // 日付入力フィールドに最小値を設定
      document.getElementById('preferredDate1').min = minDate;
      document.getElementById('preferredDate2').min = minDate;
      document.getElementById('preferredDate3').min = minDate;

      // 時間の制限を設定する関数
      function updateTimeOptions() {
        const now = new Date();
        const selectedDate = new Date(this.value);
        const timeSelect = document.getElementById(this.id.replace('Date', 'Time'));
        const isToday = selectedDate.toDateString() === now.toDateString();

        // 全ての時間オプションをリセット
        Array.from(timeSelect.options).forEach(option => {
          if (option.value) {
            const [hours] = option.value.split(':');
            option.disabled = isToday && parseInt(hours) <= now.getHours();
          }
        });

        // もし選択された時間が無効な場合、選択をリセット
        if (timeSelect.selectedOptions[0].disabled) {
          timeSelect.value = '';
        }
      }

      // 日付入力フィールドにイベントリスナーを追加
      document.getElementById('preferredDate1').addEventListener('change', updateTimeOptions);
      document.getElementById('preferredDate2').addEventListener('change', updateTimeOptions);
      document.getElementById('preferredDate3').addEventListener('change', updateTimeOptions);
    });

    document.getElementById('reservationForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const form = e.target;
      const formData = new FormData(form);
      
      fetch(form.action, {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        if (data.status === 'success') {
          window.location.href = 'thankyou.html';
        } else {
          alert(data.message || 'エラーが発生しました。もう一度お試しください。');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('エラーが発生しました。もう一度お試しください。');
      });
    });

    // マップの表示/非表示を切り替える
    document.getElementById('toggleMap').addEventListener('click', function() {
      const mapContainer = document.getElementById('mapContainer');
      const button = document.getElementById('toggleMap');
      if (mapContainer.style.display === 'none') {
        mapContainer.style.display = 'block';
        button.textContent = '地図を非表示';
      } else {
        mapContainer.style.display = 'none';
        button.textContent = '地図を表示';
      }
    });

    // PCの場合は初期表示時にマップを表示
    if (window.innerWidth > 600) {
      document.getElementById('mapContainer').style.display = 'block';
      document.getElementById('toggleMap').textContent = '地図を非表示';
    }
  </script>
</body>
</html>
